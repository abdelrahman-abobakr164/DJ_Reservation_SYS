{% extends 'base.html' %}
{% load static %}

{% block body %}

  <main class="main">

    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">My Account</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href='{% url "agent_detail" request.user.username %}' class='btn'>Profile</a></li>
            <li class="current">My Account</li>
          </ol>
        </nav>
      </div>
    </div>

    <section id="contact-2" class="contact-2 section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row justify-content-center mb-5" data-aos="fade-up" data-aos-delay="200">
          <div class="col-lg-12">
            <div class="contact-form-wrapper">
                <h2 class="text-center" style='margin-bottom:60px'>My Account</h2>
                <img id="preview" src="{{agent.image.url}}" style='border-radius:50%; width:200px; height:200px; margin-left:500px' alt="">
                
                <div class="row">
                    <div class="col-8 mx-auto">
                        <form method="POST" enctype='multipart/form-data'>
                          {% csrf_token %}
                          {{form.as_p}}
                          <button class="btn btn-outline-dark btn-lg w-100">Save</button>
                        </form>
                    </div>
                </div>
            </div>
          </div>
        </div>

      </div>

    </section>


<script>
  const imageInput = document.getElementById("id_image");
  const previewImg = document.getElementById("preview");

  imageInput.addEventListener("change", function () {
    const file = this.files[0]; // get the selected file
    if (file) {
      const reader = new FileReader();

      reader.onload = function (e) {
        previewImg.src = e.target.result; // set preview src
      };

      reader.readAsDataURL(file); // convert file to base64
    }
  });
</script>

  </main>

{% endblock body %}